#!/bin/bash

# Exit immediately if a command exits with a non-zero status.
set -e

# Define a function to install a package
install_package() {
    local package_name=$1
    local check_command=$2

    if ! command -v "$check_command" >/dev/null 2>&1; then
        echo "Installing $package_name..."
        sudo pacman -S --noconfirm "$package_name"
    else
        echo "$package_name is already installed."
    fi
}

echo "Arch Linux detected. Installing packages with pacman..."

# Install packages
install_package "fnm" "fnm"
install_package "starship" "starship"
install_package "atuin" "atuin"
install_package "zsh" "zsh"
install_package "tig" "tig"
install_package "yazi" "yazi"
install_package "zoxide" "zoxide"
install_package "udiskie" "udiskie"
install_package "fnm" "fnm"
install_package "neovim" "neovim"
install_package "firefox" "firefox"
install_package "google-chrome" "google-chrome"
install_package "brave-bin" "brave-bin"


# Install nodejs dependencies

install_package "fnm" "fnm"

fnm install 22
npm install -G pnpm

# Neovim ts language servers.
npm install -g vscode-langservers-extracted
npm install -g typescript-language-server

echo "Installation script finished."
